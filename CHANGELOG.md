# 更新日志

本文档记录本项目的所有重要变更。

格式基于 [Keep a Changelog](https://keepachangelog.com/zh-CN/1.0.0/)，
版本号遵循 [语义化版本](https://semver.org/lang/zh-CN/)。

## [1.2.2] - 当前版本

### feat（新功能）
- 帮助菜单支持动态配置文件（`help.yaml`）
- 支持帮助配置热重载，修改配置文件后无需重启插件
- API 基础地址管理支持多模式（`auto`, `default`, `eo`, `esa`）
- API 自动故障转移机制，支持 `auto` 模式下的自动切换
- 帮助菜单分为两个独立页面（`^帮助` 和 `^娱乐帮助`）
- 帮助菜单支持两列布局配置
- 帮助组支持 `fullWidth` 属性，可跨两列显示
- 帮助组支持 `column` 属性，可指定显示在左列或右列
- 帮助组支持 `masterOnly` 属性，仅主人可见
- 帮助菜单支持多主题配置系统（`resources/help/imgs/` 目录）
- 帮助菜单样式配置支持热重载（`config.yaml`）
- 帮助菜单样式配置支持字体、字体大小等自定义
- 更新日志使用可视化模板渲染（`version-info.html`）
- 战绩查询使用可视化模板渲染（`record.html`），支持科技风卡片展示
- 个人数据统计使用可视化模板渲染（`personalData.html`），支持双栏布局
- 音乐列表使用可视化模板渲染（`musicList.html`），支持封面展示和排行榜

### refactor（重构）
- 重构 apps 目录结构，按功能分类组织文件
- 重构帮助菜单样式配置系统，从 JavaScript 迁移到 YAML
- 重构战绩查询功能，从纯文本转发消息迁移到可视化模板
- 重构个人数据统计功能，从纯文本消息迁移到可视化模板

### style（样式/格式优化）
- 优化帮助菜单布局，合并相似功能组
- 优化帮助菜单分组，提高可读性
- 优化帮助菜单配置结构，移除未使用的配置项
- 优化帮助菜单资源路径，支持主题动态切换
- 优化帮助菜单背景图片加载，使用绝对路径确保资源正确显示
- 优化帮助菜单左右列平衡，实现每列约18行命令的均衡布局
- 优化帮助菜单组排序，支持 `order` 属性精确控制显示顺序
- 优化帮助菜单全宽组显示，支持顶部和底部分区渲染
- 优化更新日志显示配色，采用金黄色主题与背景协调
- 优化更新日志卡片透明度，增强毛玻璃效果
- 优化更新日志视觉层次，提升阴影和圆角效果
- 优化更新日志文字可读性，调整颜色和行高
- 优化战绩卡片整体视觉设计，采用半透明背景和毛玻璃效果
- 优化战绩状态标签，撤离成功显示绿色，失败显示红色，退出显示橙色
- 优化战绩卡片布局，修复左右内边距不对称问题（统一为20px）
- 战绩卡片支持动态地图背景图，根据地图名称自动匹配对应背景
- 战绩卡片支持动态干员图片，显示在右侧并带有从左到右的渐变遮罩效果
- 优化战绩击杀数据展示，干员击杀显示绿色，AI玩家击杀显示红色，其他AI击杀显示橙色

### perf（性能优化）
- 优化 API 请求错误处理和重试机制
- 优化日志系统，减少冗余日志输出
- 调整日志等级，提升日志可读性
- 优化数据管理器初始化日志
- 优化 JSON 数据加载状态显示
- 优化数据同步日志输出，将详细信息改为 debug 级别
- 优化更新日志显示，使用模板渲染替代纯文本

### fix（问题修复）
- 修复帮助菜单显示过长的问题
- 修复帮助菜单列宽计算问题
- 修复两列布局不平衡的问题
- 修复个人信息页面时间显示格式问题
- 修复时间显示换行问题，增加宽度并防止换行
- 修复文件移动后导入路径错误的问题

## [1.2.1 ~ 1.0.0] - 早期版本

### 基础功能...

---

## 版本号更新规则

版本号遵循 [语义化版本](https://semver.org/lang/zh-CN/) 规范，格式为 `主版本号.次版本号.修订号`（MAJOR.MINOR.PATCH）：

- **主版本号（MAJOR）**：当进行不兼容的 API 变更或重大架构调整时递增，例如 `1.2.2` → `2.0.0`
- **次版本号（MINOR）**：当添加向下兼容的新功能时递增，PATCH 归零，例如 `1.2.2` → `1.3.0`
- **修订号（PATCH）**：当进行向下兼容的问题修复时递增，例如 `1.2.2` → `1.2.3`

### 版本号更新时机

- **仅修复（fix）**：更新 PATCH，如 `1.2.2` → `1.2.3`
- **新增功能（feat）**：更新 MINOR，如 `1.2.2` → `1.3.0`
- **重大变更或优化**：通常更新 MINOR，如 `1.2.2` → `1.3.0`
- **不兼容变更**：更新 MAJOR，如 `1.2.2` → `2.0.0`

### 更新 CHANGELOG 的步骤

1. 在文件顶部添加新版本条目：`## [新版本号] - 发布日期或"未发布"`
2. 将当前版本内容移到新版本下
3. 同步更新 `package.json` 中的 `version` 字段
4. 将旧版本条目移动到历史版本部分

## 更新类型说明

遵循 [Conventional Commits](https://www.conventionalcommits.org/) 规范：

- **feat**: 新功能（feature）
- **fix**: 问题修复（bug fix）
- **docs**: 文档更新（documentation）
- **style**: 代码格式、样式调整（不影响代码运行的变动）
- **refactor**: 代码重构（既不是新功能也不是 bug 修复）
- **perf**: 性能优化（performance）
- **test**: 测试相关（tests）
- **chore**: 构建过程或辅助工具的变动
- **build**: 构建系统或外部依赖的变更
- **ci**: CI 配置文件和脚本的变更
- **revert**: 回滚之前的 commit

