{{extend defaultLayout}}

{{block 'css'}}
<link rel="stylesheet" type="text/css" href="{{_res_path}}Template/personalData/personalData.css"/>
{{/block}}

{{block 'main'}}
<div class="container">
    <!-- 背景图片 -->
    <img class="bg-image" src="{{_res_path}}imgs/others/loading13.png" alt="" />
    <div class="bg-overlay"></div>
    
    <!-- 头部区域 -->
    <div class="header">
        <div class="header-content">
            <div class="header-left">
            <img class="game-logo" src="{{_res_path}}imgs/others/logo.png" alt="三角洲行动" />
        </div>
            <div class="title">个人统计</div>
            <div class="header-right">
                <div class="user-avatar-wrapper">
                    <img class="user-avatar" src="{{userAvatar}}" alt="用户头像" data-qq-avatar="{{qqAvatarUrl}}" onerror="if(this.dataset.qqAvatar){this.src=this.dataset.qqAvatar;this.onerror=null;}else{this.style.display='none';this.parentElement.style.display='none';}" />
                </div>
                <div class="header-meta">
                    <div class="user-name-row">
                        {{if userName}}
                        <span class="user-name">{{userName}}</span>
                        {{/if}}
                        <span class="season-badge">S{{season}}</span>
                    </div>
                    {{if currentDate}}
                    <span class="report-date">{{currentDate}}</span>
                    {{/if}}
                </div>
            </div>
        </div>
    </div>

    <!-- 内容区域 -->
    <div class="content">
    <!-- 数据卡片区域 -->
    <div class="data-grid">
        {{if solDetail}}
        <div class="data-card sol-card">
            <div class="card-header" style="background-image: url('{{_res_path}}imgs/others/fire_limit_normal.png');">
                <div class="card-title">烽火地带</div>
            </div>
            <div class="card-content">
                    <!-- 段位和总对局 - 一行两列 -->
                    <div class="stats-overview">
                        <div class="stat-item stat-item-with-icon">
                            <span class="stat-label-overlay">段位</span>
                            <div class="stat-value-with-icon">
                        {{if solRankImage}}
                                <img class="rank-icon" src="{{_res_path}}{{solRankImage}}" alt="{{solRank}}" onerror="this.style.display='none';" />
                        {{/if}}
                                <span class="stat-value">{{solRank}}</span>
                    </div>
                </div>
                        <div class="stat-item">
                            <span class="stat-label-overlay">总对局</span>
                    <span class="stat-value">{{solDetail.totalFight || '-'}}</span>
                </div>
                    </div>
                    
                    <!-- 总撤离和总击杀 - 一行两列 -->
                    <div class="stats-overview">
                        <div class="stat-item">
                            <span class="stat-label-overlay">总撤离</span>
                            <span class="stat-value highlight">{{solDetail.totalEscape || '-'}}</span>
                </div>
                        <div class="stat-item">
                            <span class="stat-label-overlay">总击杀 (干员)</span>
                    <span class="stat-value highlight">{{solDetail.totalKill || '-'}}</span>
                </div>
                    </div>
                    
                    <!-- 总带出价值和赚损比 - 一行两列 -->
                    <div class="stats-overview">
                        <div class="stat-item">
                            <span class="stat-label-overlay">总带出价值</span>
                    <span class="stat-value highlight">{{solDetail.totalGainedPriceFormatted}}</span>
                </div>
                        <div class="stat-item">
                            <span class="stat-label-overlay">赚损比</span>
                    <span class="stat-value">{{solDetail.profitLossRatioFormatted}}</span>
                </div>
                    </div>
                    
                    <!-- 游戏时长和好友排行 - 一行两列 -->
                    <div class="stats-overview">
                        <div class="stat-item">
                            <span class="stat-label-overlay">游戏时长</span>
                    <span class="stat-value">{{solDetail.totalGameTime}}</span>
                </div>
                        <div class="stat-item">
                            <span class="stat-label-overlay">好友排行</span>
                    <span class="stat-value">{{solDetail.userRank || '-'}}</span>
                </div>
                    </div>
                    
                    <!-- 收藏大红价值 - 全宽 -->
                    <div class="stat-item full-width">
                        <span class="stat-label-overlay">收藏大红价值</span>
                    <span class="stat-value highlight">{{solDetail.redTotalMoney?.toLocaleString() || '-'}} <span class="sub-text">({{solDetail.redTotalCount}}个)</span></span>
                </div>
                    
                    <!-- KD 比率 -->
                <div class="kd-section">
                    <div class="kd-title">KD 比率</div>
                    <div class="kd-grid">
                        <div class="kd-item">
                            <span class="kd-label">常规</span>
                            <span class="kd-value">{{solDetail.lowKD}}</span>
                        </div>
                        <div class="kd-item">
                            <span class="kd-label">机密</span>
                            <span class="kd-value">{{solDetail.medKD}}</span>
                        </div>
                        <div class="kd-item">
                            <span class="kd-label">绝密</span>
                            <span class="kd-value">{{solDetail.highKD}}</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        {{/if}}

        {{if mpDetail}}
        <div class="data-card mp-card">
            <div class="card-header" style="background-image: url('{{_res_path}}imgs/others/allwar_limit_normal.png');">
                <div class="card-title">全面战场</div>
            </div>
            <div class="card-content">
                    <!-- 段位和总对局 - 一行两列 -->
                    <div class="stats-overview">
                        <div class="stat-item stat-item-with-icon">
                            <span class="stat-label-overlay">段位</span>
                            <div class="stat-value-with-icon">
                        {{if mpRankImage}}
                                <img class="rank-icon" src="{{_res_path}}{{mpRankImage}}" alt="{{mpRank}}" onerror="this.style.display='none';" />
                        {{/if}}
                                <span class="stat-value">{{mpRank}}</span>
                    </div>
                </div>
                        <div class="stat-item">
                            <span class="stat-label-overlay">总对局</span>
                    <span class="stat-value">{{mpDetail.totalFight || '-'}}</span>
                </div>
                    </div>
                    
                    <!-- 总胜场和胜率 - 一行两列 -->
                    <div class="stats-overview">
                        <div class="stat-item">
                            <span class="stat-label-overlay">总胜场</span>
                    <span class="stat-value highlight">{{mpDetail.totalWin || '-'}}</span>
                </div>
                        <div class="stat-item">
                            <span class="stat-label-overlay">胜率</span>
                    <span class="stat-value highlight">{{mpDetail.winRatio ? mpDetail.winRatio + '%' : '-'}}</span>
                </div>
                    </div>
                    
                    <!-- 总得分 - 全宽 -->
                    <div class="stat-item full-width">
                        <span class="stat-label-overlay">总得分</span>
                    <span class="stat-value highlight">{{mpDetail.totalScore?.toLocaleString() || '-'}}</span>
                </div>
                    
                    <!-- 分均击杀和分均得分 - 一行两列 -->
                    <div class="stats-overview">
                        <div class="stat-item">
                            <span class="stat-label-overlay">分均击杀</span>
                    <span class="stat-value">{{mpDetail.avgKillPerMinuteFormatted}}</span>
                </div>
                        <div class="stat-item">
                            <span class="stat-label-overlay">分均得分</span>
                    <span class="stat-value">{{mpDetail.avgScorePerMinuteFormatted}}</span>
                </div>
                    </div>
                    
                    <!-- 游戏时长和载具击杀 - 一行两列 -->
                    <div class="stats-overview">
                        <div class="stat-item">
                            <span class="stat-label-overlay">游戏时长</span>
                    <span class="stat-value">{{mpDetail.totalGameTime}}</span>
                </div>
                        <div class="stat-item">
                            <span class="stat-label-overlay">载具击杀</span>
                    <span class="stat-value">{{mpDetail.totalVehicleKill || '-'}}</span>
                </div>
                    </div>
                    
                    <!-- 破坏载具 - 全宽 -->
                    <div class="stat-item full-width">
                        <span class="stat-label-overlay">破坏载具</span>
                    <span class="stat-value">{{mpDetail.totalVehicleDestroyed || '-'}}</span>
                    </div>
                </div>
            </div>
            {{/if}}
        </div>
    </div>
    
    <!-- 页脚 -->
    <div class="template-footer">
        <div class="copyright-text">由 DeltaForce-Plugin-Yunzai 强力驱动</div>
    </div>
</div>
{{/block}}
